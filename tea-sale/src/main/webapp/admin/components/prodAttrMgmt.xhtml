<!--
	Params:
		productAttributeName:  String        The attribute name      
		productAttrBean:       Bean          The backed product attribute bean  
			Properties:
				.productAttrs:               List of all available product attributes
				.selectedProdAttr            Selected product attribute
				.productAttrName             The input attribte name, used to create new attribute
			Method:
				.addProductAttribute         Add an attribute by using the input name
				.deleteProductAttribute      Delete the selected product attribute          
 -->

<!DOCTYPE html>
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui" >
      
    <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />
    
	<h:form id="prodAttrForm" >
		<p:dataTable id="prodAttrTable" var="productAttr" value="#{productAttrBean.productAttrs}" 
				selectionMode="single" selection="#{productAttrBean.selectedProdAttr}" rowKey="#{productAttr.id}"
				scrollable="true" scrollHeight="350" emptyMessage="没有#{productAttributeName}" 
				style="width: 540px; margin-left: auto; margin-right:auto;">
			<p:ajax event="rowSelect" listener="#{productAttrBean.onRowSelected}" update=":prodAttrForm:editButton" />
			<p:ajax event="rowUnselect" listener="#{productAttrBean.onRowUnselected}" update=":prodAttrForm:editButton" />
			<p:column>
				<f:facet name="header">
					<h:outputText value="所有的#{productAttributeName}" />
				</f:facet>
				<h:outputText value="#{productAttr.name}" />
			</p:column>
		</p:dataTable>
		
		<p:separator />

		<div style="width: 100%; height: 100%; position: absolute; vertical-align: middle; text-align: center;">
			<p:commandButton value="增加" actionListener="#{productAttrBean.addProductAttribute}"/>
			<p:spacer width="20px"/>
			<p:commandButton id="editButton" value="修改" actionListener="#{productAttrBean.editProductAttribute}" 
					disabled="#{empty productAttrBean.selectedProdAttr}" 
					update=":inputProdAttrForm:inputValueInput"/>
			<p:spacer width="20px"/>
			<p:commandButton value="删除" action="#{productAttrBean.deleteProductAttribute}" 
					update=":prodAttrForm:prodAttrTable :prodAttrForm:editButton :inputProdAttrForm:inputValueInput" />
		</div>
	</h:form>
	<p:dialog header="管理#{productAttributeName}" id="prodAttrWindow" widgetVar="prodAttrDlg" position="center" modal="true" 
			width="400px" height="180px" resizable="false" appendTo="@(body)">
		<h:form id="inputProdAttrForm">
			<p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />
			<p:panelGrid columns="2">
				<h:outputLabel for="inputValueInput" value="请输入" />
				<p:inputText id="inputValueInput" value="#{productAttrBean.prodAttr}" label="inputValueLabel" />
			</p:panelGrid>
			
			<p:separator />
			
			<div style="float: center">
				<p:commandButton value="保存" actionListener="#{productAttrBean.saveProdAttr}" 
						update=":prodAttrForm:prodAttrTable :prodAttrForm:editButton inputValueInput"/>
				<p:commandButton value="取消" actionListener="#{productAttrBean.cancel}" 
						update=":prodAttrForm:prodAttrTable :prodAttrForm:editButton inputValueInput"/>
			</div>
		</h:form>
	</p:dialog>
	
	<p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false" appendTo="@(body)">
    	<p:graphicImage library="images" name="ajax-loading.gif" />
	</p:dialog>
	
</html>